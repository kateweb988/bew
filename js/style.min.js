function calcool_zab(){var t=$("#calcool_zab_form").serialize();$.ajax({url:"",type:"post",data:"f=calcool_zab&"+t,success:function(t){t=JSON.parse(t);document.getElementById("kolvo_stolbov").innerHTML=t.kolvo_stolbov,document.getElementById("vysota_stolba").innerHTML=t.vysota_stolba,document.getElementById("stlb_pogonm_ceil").innerHTML=t.stlb_pogonm_ceil,document.getElementById("summa_zabora").innerHTML=t.summa_zabora,document.getElementById("kolvo_pogonm_ceil").innerHTML=t.kolvo_pogonm_ceil,document.getElementById("kolvo_listov_ceil").innerHTML=t.kolvo_listov_ceil,document.getElementById("ves_listov").innerHTML=t.ves_listov,document.getElementById("laga_pogonm_ceil").innerHTML=t.laga_pogonm_ceil,document.getElementById("laga_ves").innerHTML=t.laga_ves,document.getElementById("stlb_ves").innerHTML=t.stlb_ves,document.getElementById("sum_lagas").innerHTML=t.sum_lagas,document.getElementById("sum_stolb").innerHTML=t.sum_stolb,document.getElementById("summa_truby").innerHTML=t.summa_truby,document.getElementById("summa_vsego").innerHTML=t.summa_vsego}})}function calcool_proflist(){var t=$("#calcool_proflist_form").serialize();$.ajax({url:"",type:"post",data:"f=calcool_proflist&"+t,success:function(t){t=JSON.parse(t);document.getElementById("kolvo_listov").innerHTML=t.kolvo_listov,document.getElementById("kolvo_pogonm").innerHTML=t.kolvo_pogonm,document.getElementById("ves_listov").innerHTML=t.ves_listov,document.getElementById("summa_zabora").innerHTML=t.summa_zabora}})}$(document).on("input",".disab_vys",function(){var o=calcool_zab_form.vysot_zabora.value;$("#dlina_lista").empty();$("#dlina_lista").append('<option value="" selected disabled></option>'),$.each({1.5:"1,50 метра",1.8:"1,80 метра","2.0":"2,00 метра",2.2:"2,20 метра",2.5:"2,50 метра","3.0":"3,00 метра","6.0":"6,00 метров"},function(t,e){o<=t&&$("#dlina_lista").append('<option value="'+t+'">'+e+"</option>")}),$("#id_dlin").addClass("red"),calcool_zab()}),$(document).on("input",".remove_red",function(){$(this).prev().removeClass("red"),calcool_zab()}),$(document).on("change",".type_zab_rad",function(){$(this).attr("checked","checked")&&(calcool_zab_form.radio_okras.value=$(this).data("chek")),calcool_zab()}),$(document).on("input",".calcool_zab",function(){calcool_zab()}),!1===navigator.cookieEnabled||setTimeout(function(){let t=JSON.stringify(sbjs.get);t=t.replaceAll("&","||"),$.ajax({type:"post",data:"f=visits&vis="+t,success:function(t){}})},3e3),$(document).on("input",".calcool_proflist_ds",function(){let t=document.getElementById("dlina").value*document.getElementById("shiri").value;var e=t.toFixed(2);document.getElementById("ploch").value=e,document.getElementById("plosh").innerHTML=e,calcool_proflist()}),$(document).on("input",".calcool_proflist_ploch",function(){document.getElementById("dlina").value=0,document.getElementById("shiri").value=0,document.getElementById("plosh").innerHTML=Number(this.value).toFixed(2),calcool_proflist()}),$(document).on("input",".calcool_proflist",function(){calcool_proflist()}),$(document).on("change","#list_marka",function(){var t=this.value,e=document.getElementById("radio_okras").value;$("#list_tolshina").empty(),$.ajax({url:"",type:"post",data:"f=calcool_proflist_tolsh&idx="+t+"&okras="+e,success:function(t){t=JSON.parse(t);$("#list_tolshina").append('<option value="" selected disabled></option>'),$.each(t,function(t,e){$("#list_tolshina").append('<option class="py-2" value="'+e+'">'+e+"</option>")})}}),calcool_proflist()}),$(document).on("change",".type_prof_rad",function(){$(this).attr("checked","checked")&&(calcool_proflist_form.radio_okras.value=$(this).data("chek"));var t=document.getElementById("radio_okras").value;$("#list_marka").empty(),$.ajax({url:"",type:"post",data:"f=calcool_proflist_marka&okras="+t,success:function(t){t=JSON.parse(t);$("#list_marka").append('<option value="" selected disabled></option>'),$.each(t,function(t,e){$("#list_marka").append('<option class="py-2" value="'+t+'">'+e+"</option>")})}}),calcool_proflist()}),$(document).on("change",".type_prof_rab",function(){$(this).attr("checked","checked")&&(calcool_proflist_form.radio_rabot.value=$(this).data("chek")),calcool_proflist()}),$(document).on("change",".tovplus",function(){var t=$(this).closest(".kolvotov").data("idd"),e=$(this).val();$.ajax({type:"post",data:"idd="+t+"&klv="+e+"&f=num_basket",success:function(t){t=t.split("|");let e=parseFloat(t[1]).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1 ");e=e.replace(/\./,","),document.getElementById("korz_kolvo").innerHTML=t[0],document.getElementById("korz_summa").innerHTML=e,document.getElementById("korz_total").innerHTML=e+"  руб."}})}),function(){for(var t=document.querySelectorAll("[data-bs-tolsh]"),e=0;e<t.length;e++)t[e].addEventListener("click",function(){var t=document.getElementById("cOption").innerText,e=(document.querySelectorAll("[data-bs-tolsh]"),this.dataset.bsTolsh);this.dataset.bsSelect="1",document.getElementById(e).textContent=this.innerText,document.getElementById("zOption").textContent="оцинкованный"===t?this.dataset.bsCena:this.dataset.bsZena,document.getElementById("id1042143").value=1})}(),function(){for(var t=document.querySelectorAll("[data-bs-color]"),e=0;e<t.length;e++)t[e].addEventListener("click",function(){var t=this.dataset.bsColor;document.getElementById(t).textContent=this.dataset.bsValue;document.getElementById("sd0");"оцинкованный"==this.dataset.bsValue?(document.getElementById("sd0").style.display="none",document.getElementById("sd3").style.display="none",document.getElementById("sd6").style.display="none",document.getElementById("sd7").style.display="none"):(document.getElementById("sd0").style.display="block",document.getElementById("sd3").style.display="block",document.getElementById("sd6").style.display="block",document.getElementById("sd7").style.display="block"),document.getElementById("tOption").textContent="нет",document.getElementById("zOption").textContent="нет",document.getElementById("id1042143").value=1})}(),$(document).on("click",".del_basket",function(){var t=$(this).closest(".kolvotov").data("idd");$.ajax({type:"post",data:"idd="+t+"&f=del_basket",success:function(t){}}),location.reload()}),$(document).on("click",".callzapros,.callme,.callme2",function(){location.href="/zapros"}),$(document).on("click",".paramall",function(){$(".pararam").toggle(),$(this).toggle()}),$(document).on("keyup","#search",function(){var e=$("#search_box-result"),t=$(this).val();""!==t&&1<t.length?$.ajax({type:"POST",url:"/ajax_search.php",data:{search:t},success:function(t){e.html(t),""!==t?e.fadeIn():e.fadeOut(100)}}):(e.html(""),e.fadeOut(100))}),$(document).on("keyup","#search2_",function(){var e=$("#search_box-result2"),t=$(this).val();""!==t&&1<t.length?$.ajax({type:"POST",url:"/ajax_search.php",data:{search:t},success:function(t){e.html(t),""!==t?e.fadeIn():e.fadeOut(100)}}):(e.html(""),e.fadeOut(100))}),$(document).on("click",".butsearch",function(){var t=$("#search").val();return""!==t&&(location.href="/searchres?search="+t),!1}),$(document).on("click","#butsearch2",function(){var t=$("#search2").val();return""!==t&&(location.href="/searchres?search="+t),!1}),$(document).on("click","#logout",function(){deleteCookie("xuis"),location.reload()}),$(document).on("click",".add_item4",function(){var t=this.parentNode.getElementsByTagName("input")[0].value,e=(e=localStorage.getItem("_ym_uid")).replace(/['"]+/g,""),o=$(this).data("idd"),a=$("#tovarimg"+o),n=$("#korzina"),l=a.width();return a.clone().css({width:l,position:"absolute","z-index":"9999",top:a.offset().top,left:a.offset().left}).appendTo("body").animate({opacity:.05,left:n.offset().left,top:n.offset().top,width:20},1e3,function(){$(this).remove()}),$.ajax({type:"post",data:"idt="+o+"&mul=0&idp="+e+"&klv="+t+"&f=add_basket",success:function(t){t=t.split("|");let e=parseFloat(t[1]).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1 ");e=e.replace(/\./,","),document.getElementById("korz_kolvo").innerHTML=t[0],document.getElementById("korz_summa").innerHTML=e}}),!1}),$(document).on("click",".add_item_p",function(){var t=(t=localStorage.getItem("_ym_uid")).replace(/['"]+/g,""),e=$("#id1042143").val(),o=$("#cOption").text(),a=$("#tOption").text();if("нет"===o||"нет"===a)return"нет"===o&&"нет"===a?document.getElementById("plistparam").innerHTML="цвет/покрытие и толщину листа":"нет"===o?document.getElementById("plistparam").innerHTML="цвет/покрытие":"нет"===a&&(document.getElementById("plistparam").innerHTML="толщину листа"),$("#myModal").modal("show"),!1;a=a.substring(0,a.length-2);var n=$(".image-zoom").closest(".product-gallery-preview-item.active").find("img"),l=$("#korzina"),c=n.width();return n.clone().css({width:c,position:"absolute","z-index":"9999",top:n.offset().top,left:n.offset().left}).appendTo("body").animate({opacity:.05,left:l.offset().left,top:l.offset().top,width:20},1e3,function(){$(this).remove()}),$.ajax({type:"post",data:"mul=1&idp="+t+"&klv="+e+"&clr="+o+"&tls="+a+"&f=add_basket",success:function(t){t=t.split("|");let e=parseFloat(t[1]).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1 ");e=e.replace(/\./,","),document.getElementById("korz_kolvo").innerHTML=t[0],document.getElementById("korz_summa").innerHTML=e}}),!1}),$(document).on("click",".select_du",function(){var e=$("#kolvoadd").val(),o=$("#duhtml_result"),a=$("#rub"),n=$("#sum"),t=$(this).data("idd");return $.ajax({type:"post",data:"ids="+t+"&f=duhtml_sel",success:function(t){o.html(t),o.fadeIn()}}),$.ajax({type:"post",data:"ids="+t+"&f=ducena_sel",success:function(t){a.text(t),n.text(t*e)}}),!1}),$(document).on("change","#kolvoadd",function(){var t=$(this).val()*$("#rub").text();$("#sum").text(t)});var cartCount1=document.getElementById("cartcount1"),cartCount2=document.getElementById("cartcount2"),cartCount3=document.getElementById("cartcount3"),cartClear=document.getElementById("cartclear");function openCarts(){var t,e,o=getCartData("cart"),a=(getCartData("cart_summa"),getCartData("cart_order")),n="",l="",c=0,d=0,s=0;if(null===o)return a?$.ajax({type:"post",dataType:"html",data:"f=read_tpl&tpl=korz_alltovr&idd="+a,success:function(t){$("#korz_alltovr").html(t)}}):cartCount3.innerHTML='В корзине пока нет товаров.<br/>Перейдите в каталог или воспользуйтесь поиском, чтобы найти нужный товар.<br/><br/><a href="/"><div class="btn btn-success">Начать покупки</div></a>',!1;for(t in n='<table class="table table-sm table-striped"><thead class="thead-dark"><tr><th scope="col">№</th><th scope="col">Артикул</th><th scope="col">Наименование</th><th scope="col" class="text-right">Цена,&nbsp;₽</th><th scope="col" class="text-right">Кол&#8209;во</th><th scope="col" class="text-right">Едн.</th><th scope="col" class="text-right">Сумма,&nbsp;₽</th></tr></thead>',o)n+='<tr class="arttovr apo" data-target="#tovone" data-idd="'+t+'" data-rub="'+o[t][1]+'" data-klv="'+o[t][2]+'" data-edn="'+o[t][3]+'" data-toggle="modal">',n+="<td>"+ ++c+"</td>",n+="<td>"+t+"</td>",n+='<td class="carttr">'+o[t][0]+"</td>",n+='<td class="text-right">'+("0.00"===o[t][1]?"по запросу":o[t][1])+"</td>",n+='<td class="text-right">'+o[t][2]+"</td>",n+='<td class="text-right">'+o[t][3]+"</td>",n+='<td class="text-right">'+o[t][4].toFixed(2)+"</td>",d+=+o[t][2],n+="</tr>";for(e in n+='<tr class="table-primary"><td colspan="3" class="font-weight-bold">ИТОГО:</td><td></td><td class="text-right font-weight-bold">'+d+'</td><td></td><td class="text-right font-weight-bold">'+getCartData("cart_summa").toFixed(2)+"</td></tr>",n+="</table>",cartCount1.innerHTML='<div id="isnullhide"><div id="cartclear" class="btn btn-sm btn-danger">Очистить корзину1</div>&nbsp;&nbsp;<div id="cartreliz" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#podkupka">Оформить заказ</div>&nbsp;&nbsp;<div id="cartcontin" class="btn btn-sm btn-success">Продолжить покупки</div><br><br></div>'+n,l="<div>",o)l+='<div class="card mb-2">',l+='<div class="arttovr apo" data-target="#tovone" data-idd="'+e+'" data-rub="'+o[e][1]+'" data-klv="'+o[e][2]+'" data-edn="'+o[e][3]+'" data-toggle="modal">'+o[e][0]+"</div>",l+="<div>Цена: "+("0.00"===o[e][1]?"по запросу":o[e][1])+" руб. Кол&#8209;во: "+o[e][2]+" "+o[e][3]+"</div>",l+='<div class="font-weight-bold">Сумма: '+o[e][4].toFixed(2)+"</div>",l+="</div>",s+=+o[e][2];return l+='<div class="font-weight-bold">ОБЩЕЕ КОЛИЧЕСТВО: '+s+"</div>",l+='<div class="font-weight-bold">СУММА ЗАКАЗА: '+getCartData("cart_summa").toFixed(2)+" руб.</div>",l+="</div>",cartCount2.innerHTML='<div id="isnullhide"><div id="cartclear" class="btn btn-sm btn-danger">Удалить все</div>&nbsp;&nbsp;<div id="cartreliz" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#podkupka">Оформить</div>&nbsp;&nbsp;<div id="cartcontin" class="btn btn-sm btn-success">Продолжить</div><br><br></div>'+l,!1}function getContent_filt(e,o){$("#catcontent").fadeOut(100),$.get(e).done(function(t){$("#catcontent").html($(t).find("#catcontent").html()),$("#filters").html($(t).find("#filters").html()),!0===o&&history.pushState(null,null,e),document.documentElement.scrollIntoView(!0);t=$("#all_vybr").data("allv");""!=t&&$("#vybor_str").text("Вы выбрали: "+t),$("#catcontent").fadeIn(200)})}function getCheckedBoxes(t){t=document.querySelectorAll("input.checkbox"+t+":checked");return Array.from(t).map(t=>t.getAttribute("data-fidd")).join(":")}$(document).on("click","#cartcontin",function(){location.href="/catalog"}),$(document).on("change","#mod_kklv",function(){var t="по запросу"===$("#mod_krub").text()?"0":$("#mod_krub").text(),t=$(this).val()*t;$("#onet_summ").text(t.toFixed(2))}),$(document).on("click","#send_korzina",function(){if(""===$("#obfio").val()||""===$("#obfrm").val()||""===$("#obeml").val()||""===$("#obtlf").val()||""===$("#obadr").val())return alert("Заполните все поля формы."),!1;var t=getCartData("cart"),e=getCartData("cart_summa"),t=JSON.stringify(t);return $.ajax({type:"post",data:"f=korz_insr&dat="+t+"&sum="+e+"&fio="+$("#obfio").val()+"&frm="+$("#obfrm").val()+"&eml="+$("#obeml").val()+"&tlf="+$("#obtlf").val()+"&adr="+$("#obadr").val()+"&com="+$("#obcom").val(),success:function(t){localStorage.setItem("cart_order",t),localStorage.removeItem("cart"),document.cookie="order="+t,localStorage.setItem("cart_summa","0"),location.href="/order"}}),!1}),$(document).ready(function(){$("body").on("click",".number-minus, .number-plus",function(){var t=$(this).closest(".number"),e=t.find(".number-text"),o=t.data("step"),t=parseFloat(e.val());return $(this).hasClass("number-minus")?t-=o:t+=o,e.val(t),e.change(),!1}),$("body").on("change",".number-text",function(){var t=$(this),e=t.closest(".number"),o=e.data("step"),a=parseInt(e.data("min")),n=parseInt(e.data("max")),e=parseFloat(t.val());isNaN(e)?e=o:a&&e<a?e=a:n&&n<e&&(e=n),t.val(e)})}),$("body").on("input",".number-text",function(){this.value=this.value.replace(/[^0-9]/g,"")}),$(document).on("click",".filtcheck",function(){let t=$("#all_grps").data("allg");var e=t.split(",");let o=[],a=[],n=[],l="",c=0,d=0,s=0;for(;c<e.length;)o[c]=getCheckedBoxes(c),""!==o[c]&&(a[d]=e[c],n[d]=o[c],d++),c++;for(;s<a.length;)l=l+"&"+a[s]+"="+n[s],s++;l=l.substr(1),""!==l&&(l=encodeURIComponent(l));var i=new URL(document.location.href).searchParams.get("tgr");null!==i?""!==l?getContent_filt(location.pathname+"?tgr="+i+"&filt=on&"+l,!0):getContent_filt(location.pathname+"?tgr="+i,!0):""!==l?getContent_filt(location.pathname+"?filt=on&"+l,!0):getContent_filt(location.pathname,!0)}),$(document).on("click",".filt_hidden_list_show",function(){var t=$(this),e=t.data("numb");$(".filt_hidden_list_"+e).is(":visible")?(t.html("показать все"),t.removeClass("icon-stup"),t.addClass("icon-stdn")):(t.html("cкрыть"),t.removeClass("icon-stdn"),t.addClass("icon-stup")),$(".filt_hidden_list_"+e).toggle(200)});